class Trig{trigs=[];thePos=[];height=0;scrollDir=["trig-scroll-down","trig-scroll-up"];observer;trigScrollTimeout=null;trigAttributesCache=new Map;constructor(){this.trigInit=this.trigInit.bind(this),this.trigWindowHeight=this.trigWindowHeight.bind(this),this.trigScroll=this.trigScroll.bind(this),this.trigObserver=this.trigObserver.bind(this),this.observer=new IntersectionObserver(this.trigObserver),this.trigWindowHeight()}trigInit(){this.observer=new IntersectionObserver(this.trigObserver),this.trigs=document.querySelectorAll("body,.enable-trig,[data-trig]"),this.trigScroll()}trigWindowHeight(){this.height=innerHeight}trigScroll(){this.trigs&&0!==this.trigs.length&&this.trigs.forEach((t,i)=>{t.index=i,this.observer.observe(t)})}trigEntries(t){t.forEach(t=>{!0==this.trigIntersecting(t)?(this.trigPos(t),this.updatePos(t.target)):document.body==t.target&&(0==t.target.index&&this.trigDirection(t),this.trigPos(t),this.updatePos(t.target))})}trigDirection(t){var i=t.boundingClientRect.y;this.scrollPos&&(this.scrollPos<i?this.scrollDir=["trig-scroll-down","trig-scroll-up"]:this.scrollPos>i&&(this.scrollDir=["trig-scroll-up","trig-scroll-down"])),this.scrollPos=i}trigObserver(t){requestAnimationFrame(()=>{this.trigEntries(t)}),t.forEach(t=>{this.observer.unobserve(t.target)})}trigIntersecting(t){return document.body!=t.target&&(t.isIntersecting?t.target.classList.add("trig"):t.target.classList.remove("trig"),!0)}trigPos(t){let i=this.getTrigOptions(t),{top:e,height:r}=t.boundingClientRect,s=Math.max(this.height,r),g=this.calculatePosTop(t.target,e,i),l=this.calculatePosition(g,s,i,t.target);this.trigSetPos(l,i.min,i.max,t.target)}getTrigOptions(t){let i={negativeOffset:0,offset:0,height:0,min:-100,max:100};return Object.keys(i).forEach(e=>{i[e]=this.trigAttributes(t,i,e)}),i}calculatePosTop(t,i,e){let r=this.height/2;return t===document.body?-i:e.negativeOffset>0?-(i-(r+e.negativeOffset)):-(i-(r-e.offset))}calculatePosition(t,i,e,r){let s=r===document.body?i-this.height:i+e.height;return t/s*100}trigAttributes(t,i,e){let r=this.trigAttributesCache.get(t.target);r||(r={},this.trigAttributesCache.set(t.target,r));let s=t.target.getAttribute("data-trig-"+e);return s&&(r[e]=s),r[e]||i[e]}trigSetPos(t,i,e,r){t>=i&&t<=e?this.thePos[r.index]=t:t<=i?this.thePos[r.index]=i:t>=e&&(this.thePos[r.index]=e)}trigSetBody(t){let i=t.classList;this.updateScrollDirection(i),this.applySplitPoints(t)}updateScrollDirection(t){t.contains(this.scrollDir[0])?t.replace(this.scrollDir[0],this.scrollDir[1]):t.contains(this.scrollDir[1])||t.add("trig-scroll-up")}applySplitPoints(t){[0,25,50,75,100].forEach(i=>this.trigSplit(i,t.index,t.classList))}trigSplit(t,i,e){var r=t;0==t||100==t?this.trigSplitEquals(r,t,e,i):this.trigSplitMoreThan(r,t,e,i)}trigSplitEquals(t,i,e,r){let s=this.thePos[r],g={0:{name:"top",min:0,max:1},100:{name:"bottom",min:99,max:100}};if(g[i]){let{name:l,min:o,max:h}=g[i];e.toggle(`trig-scroll-${l}`,s>=o&&s<=h)}}trigSplitMoreThan(t,i,e,r){this.thePos[r]>=i?e.add("trig-scroll-"+t):this.thePos[r]<i&&e.remove("trig-scroll-"+t)}trigSetVars(t,i,e){if(!this.thePos[t.index])return;let r=Math.ceil(this.thePos[t.index]),s={trigVar:{key:"--trig",value:`${r}%`,reverse:`${-r}%`},trigPixels:{key:"--trig-px",value:`${r}px`,reverse:`${-r}px`},trigDegrees:{key:"--trig-deg",value:`${Math.ceil(r/100*360)}deg`,reverse:`${Math.ceil(-(r/100*360))}deg`}};this.setCSSVariables(i,e,s,t)}setCSSVariables(t,i,e,r){Object.entries(e).forEach(([e,{key:s,value:g,reverse:l}])=>{t.getPropertyValue(s)!=g&&"true"===r.dataset[e]&&(t.setProperty(s+i,g),t.setProperty(s+i+"-reverse",l))})}updatePos(t){if("true"==t.dataset.trigGlobal)var i=document.documentElement.style,e="-"+t.id;else var i=t.style,e="";document.body==t?this.trigSetBody(t):this.trigSetVars(t,i,e)}}const trig=new Trig;window.addEventListener("scroll",trig.trigScroll,{passive:!0}),window.addEventListener("resize",trig.trigWindowHeight,{passive:!0}),window.addEventListener("load",trig.trigInit,{passive:!0});