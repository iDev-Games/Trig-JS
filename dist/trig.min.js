class Trig{trigs=[];thePos=[];height=0;scrollDir=["trig-scroll-down","trig-scroll-up"];trigClass="trig-down";observer;trigScrollTimeout=null;trigAttributesCache=new Map;constructor(){this.trigInit=this.trigInit.bind(this),this.trigWindowHeight=this.trigWindowHeight.bind(this),this.trigScroll=this.trigScroll.bind(this),this.trigObserver=this.trigObserver.bind(this),this.observer=new IntersectionObserver(this.trigObserver),this.trigWindowHeight()}trigInit(){this.observer=new IntersectionObserver(this.trigObserver),this.trigs=document.querySelectorAll("body,.enable-trig,[data-trig]"),this.trigScroll()}trigWindowHeight(){this.height=innerHeight}trigScroll(){this.trigs&&0!==this.trigs.length&&this.trigs.forEach((t,i)=>{t.index=i,this.observer.observe(t)})}trigEntries(t){t.forEach(t=>{!0==this.trigIntersecting(t)?(this.trigPos(t),this.updatePos(t.target)):document.body==t.target&&(0==t.target.index&&this.trigDirection(t),this.trigPos(t),this.updatePos(t.target))})}trigDirection(t){var i=t.boundingClientRect.y;this.scrollPos&&(this.scrollPos<i?(this.scrollDir=["trig-scroll-down","trig-scroll-up"],this.trigClass="trig-up"):this.scrollPos>i&&(this.scrollDir=["trig-scroll-up","trig-scroll-down"],this.trigClass="trig-down")),this.scrollPos=i}trigObserver(t){requestAnimationFrame(()=>{this.trigEntries(t)}),t.forEach(t=>{this.observer.unobserve(t.target)})}trigIntersecting(t){return document.body!=t.target&&(t.isIntersecting?t.target.classList.contains("trig")||t.target.classList.add("trig",this.trigClass):t.target.classList.remove("trig","trig-down","trig-up"),!0)}trigPos(t){let i=this.getTrigOptions(t),{top:r,height:e}=t.boundingClientRect,s=Math.max(this.height,e),g=this.calculatePosTop(t.target,r,i),l=this.calculatePosition(g,s,i,t.target);this.trigSetPos(l,i.min,i.max,t.target)}getTrigOptions(t){let i={negativeOffset:0,offset:0,height:0,min:-100,max:100};return Object.keys(i).forEach(r=>{i[r]=this.trigAttributes(t,i,r)}),i}calculatePosTop(t,i,r){let e=this.height/2;return t===document.body?-i:r.negativeOffset>0?-(i-(e+r.negativeOffset)):-(i-(e-r.offset))}calculatePosition(t,i,r,e){let s=e===document.body?i-this.height:i+r.height;return t/s*100}trigAttributes(t,i,r){let e=this.trigAttributesCache.get(t.target);e||(e={},this.trigAttributesCache.set(t.target,e));let s=t.target.getAttribute("data-trig-"+r);return s&&(e[r]=s),e[r]||i[r]}trigSetPos(t,i,r,e){t>=i&&t<=r?this.thePos[e.index]=t:t<=i?this.thePos[e.index]=i:t>=r&&(this.thePos[e.index]=r)}trigSetBody(t){let i=t.classList;this.updateScrollDirection(i),this.applySplitPoints(t)}updateScrollDirection(t){t.contains(this.scrollDir[0])?t.replace(this.scrollDir[0],this.scrollDir[1]):t.contains(this.scrollDir[1])||t.add("trig-scroll-up")}applySplitPoints(t){[0,25,50,75,100].forEach(i=>this.trigSplit(i,t.index,t.classList))}trigSplit(t,i,r){var e=t;0==t||100==t?this.trigSplitEquals(e,t,r,i):this.trigSplitMoreThan(e,t,r,i)}trigSplitEquals(t,i,r,e){let s=this.thePos[e],g={0:{name:"top",min:0,max:1},100:{name:"bottom",min:99,max:100}};if(g[i]){let{name:l,min:o,max:h}=g[i];r.toggle(`trig-scroll-${l}`,s>=o&&s<=h)}}trigSplitMoreThan(t,i,r,e){this.thePos[e]>=i?r.add("trig-scroll-"+t):this.thePos[e]<i&&r.remove("trig-scroll-"+t)}trigSetVars(t,i,r){if(!this.thePos[t.index])return;let e=Math.ceil(this.thePos[t.index]),s={trigVar:{key:"--trig",value:`${e}%`,reverse:`${-e}%`},trigPixels:{key:"--trig-px",value:`${e}px`,reverse:`${-e}px`},trigDegrees:{key:"--trig-deg",value:`${Math.ceil(e/100*360)}deg`,reverse:`${Math.ceil(-(e/100*360))}deg`}};this.setCSSVariables(i,r,s,t)}setCSSVariables(t,i,r,e){Object.entries(r).forEach(([r,{key:s,value:g,reverse:l}])=>{t.getPropertyValue(s)!=g&&e.dataset[r]&&(e.dataset[r]=10*Math.round(parseInt(g)/10),t.setProperty(s+i,g),t.setProperty(s+i+"-reverse",l))})}updatePos(t){if("true"==t.dataset.trigGlobal)var i=document.documentElement.style,r="-"+t.id;else var i=t.style,r="";document.body==t?this.trigSetBody(t):this.trigSetVars(t,i,r)}}const trig=new Trig;window.addEventListener("scroll",trig.trigScroll,{passive:!0}),window.addEventListener("resize",trig.trigWindowHeight,{passive:!0}),window.addEventListener("load",trig.trigInit,{passive:!0});